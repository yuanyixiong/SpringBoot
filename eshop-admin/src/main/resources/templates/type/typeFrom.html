<html xmlns:th="http://www.thymeleaf.org">
<div class="tables-main">
    <ol class="breadcrumb">
        <li><a th:href="@{/index}">首页</a></li>
        <li><a href="#">商品模块</a></li>
        <li class="active"><a href="javascript:loadHTML('/shopping/mall/type/main')">商品类型管理</a></li>
        <li th:switch="${action}">
            <a href="#" th:case="add">添加</a>
            <a href="#" th:case="edit">编辑</a>
            <a href="#" th:case="info">详情</a>
        </li>
    </ol>
    <div class="chrt-inner grid-1 col-xs-12 ">
        <div class="form-body col-xs-12 col-xs-offset-2">
            <form class="form-horizontal">
                <div class="form-group  has-feedback col-xs-8">
                    <label for="id" class="control-label">类型编号:</label>
                    <input id="id" name="id" class="form-control" type="text" />
                    <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeName" class="control-label">类型名称:</label>
                    <input id="typeName" name="typeName" class="form-control" type="text" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="parentId" class="control-label">类型父级编码:</label>
                    <input id="parentName" class="form-control" type="text" />
                    <input id="parentId" name="typeParentId" class="form-control hide" type="text" />
                    <div id="tree" class="sr-only" th:unless="${action eq 'info'}" ></div>
                    <span class="glyphicon  form-control-feedback" aria-hidden="true" th:classappend="${action eq'info'?'sr-only':_}">
                        <img th:src="@{/images/arrow.jpg}" width="100%" height="100%"/>
                    </span>
                    <span th:text="${action=='info'?_:'请单击表单选择父节点'}"></span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeNote" class="control-label">类型搜索关键字:</label>
                    <input id="typeNote" name="typeNote" class="form-control" type="text" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label class="control-label">是否移除:</label>
                    <div  class="radio-inline">
                        <label>
                            <input type="radio" value="1" name="isDel"  />已删
                        </label>
                    </div>
                    <div class="radio-inline">
                        <label>
                            <input type="radio" value="2"  name="isDel" checked="checked"/>未删
                        </label>
                    </div>
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeUrl" class="control-label">类型Click地址:</label>
                    <input id="typeUrl" name="typeUrl" class="form-control" type="text" value="/#" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeImage" class="control-label">类型图片地址:</label>
                    <input id="typeImage" name="typeImage" class="form-control" type="text" value="/#" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeIco" class="control-label">类型图标样式:</label>
                    <input id="typeIco" name="typeIco" class="form-control" type="text" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeIndex" class="control-label">类型排序:</label>
                    <input id="typeIndex" name="typeIndex" class="form-control" type="number" value="0" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8" th:classappend="${(action eq 'add')or (action eq 'edit')?'hide':'' }">
                    <label for="createTime" class="control-label">创建时间:</label>
                    <input id="createTime" name="createTime" class="form-control" type="date" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8" th:classappend="${(action eq 'add')or (action eq 'edit')?'hide':'' }">
                    <label for="updateTime" class="control-label">更新时间:</label>
                    <input id="updateTime" name="updateTime" class="form-control" type="date" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="form-group  has-feedback col-xs-8">
                    <label for="typeDescription" class="control-label">描述:</label>
                    <input id="typeDescription" name="typeDescription" class="form-control" type="text" />
                    <span class="glyphicon  form-control-feedback" aria-hidden="true"></span>
                    <span class="sr-only">(error)</span>
                </div>
                <div class="col-xs-8">
                    <button type="button" class="btn btn-success" th:if="${action eq 'add' or action eq 'edit'}" sign="save">保存</button>
                    <button type="button" class="btn btn-info" sign="back">返回</button>
                </div>
            </form>
        </div>
    </div>
    <div class="clearfix"></div>
</div>
<!--模块JS公共变量-->
<script type="text/javascript" th:inline="javascript" >
    //商品类型模块from页面链接操作的url
    var saveUrl = "/shopping/mall/type/save"; //保存、修改公用此URL
    var mainUrl = "/shopping/mall/type/main"; //返回模块主页面的URL
    var inspectRepeatUrl = "/shopping/mall/type/inspectRepeat"; //编号重复验证的URL
    var loadTreeViewUrl="/shopping/mall/type/getTypes";//加载下拉树的URL
    var loadParentNameUrl="/shopping/mall/type/getModel";//加载父节点名称的URL

    // 活动类型
    var action = [[${action}]];
</script>
<!--表单数据初始化-->
<script type="text/javascript" th:inline="javascript" th:if="${model}">
    var $model;
    $(function(){
        if(action == "info" || action == "edit") {
            //加载数据
            //取出页面的表单dom
            $model = [
                $("#id"),
                $("#typeName"),
                $("#parentId"),
                $("#typeNote"),
                $("input[name='isDel']"),
                $("#typeUrl"),
                $("#typeImage"),
                $("#typeIco"),
                $("#typeIndex"),
                $("#createTime"),
                $("#updateTime"),
                $("#typeDescription"),
                $("#parentName")
            ];
        }
        //浏览详情，需要赋值
        if (action == "info" || action == "edit") {


            //给表单dom赋值
            $model[0].val(/*[[${model.id}]]*/null);
            $model[1].val(/*[[${model.typeName}]]*/null);
            $model[2].val(/*[[${model.typeParentId}]]*/null);
            $model[3].val(/*[[${model.typeNote}]]*/null);

            //单选
            if(/*[[${model.isDel eq 1}]]*/null){
                $model[4].filter("[type='radio'][name='isDel'][value='1']").attr("checked",true);
            }else{
                $model[4].filter("[type='radio'][name='isDel'][value='2']").attr("checked",true);
            }


            $model[5].val(/*[[${model.typeUrl}]]*/null);
            $model[6].val(/*[[${model.typeImage}]]*/null);
            $model[7].val(/*[[${model.typeIco}]]*/null);
            $model[8].val(/*[[${model.typeIndex}]]*/null);

            //日期
            if(/*[[${model.createTime}]]*/null) {
                $model[9].val(new Date(/*[[${model.createTime}]]*/).format("yyyy-MM-dd"));
            }
            if(/*[[${model.updateTime}]]*/null) {
                $model[10].val(new Date(/*[[${model.updateTime}]]*/).format("yyyy-MM-dd"));
            }

            $model[11].val(/*[[${model.typeDescription}]]*/null);
        }
    });
</script>
<script type="text/javascript" th:inline="javascript" th:if="${(action eq 'info') or (action eq 'edit')}">
    /**
     * 绑定下拉树的父节点名称
     * @param responseData
     */
    function bindingParentName(responseData){
        $("#parentName").val(responseData.data.typeName);
    }
</script>
<!--表单页面通用JS 表单数据初始化-->
<script type="text/javascript" th:inline="javascript" th:src="@{/js/fromInit.js}" th:if="${model}"></script>
<!--表单页面通用JS 表单事件-->
<script type="text/javascript" th:inline="javascript" th:src="@{/js/fromClick.js}" ></script>
<!--bootstrap jquery下拉树插件的JS-->
<script type="text/javascript" th:src="@{/js/treeview.js}"></script>